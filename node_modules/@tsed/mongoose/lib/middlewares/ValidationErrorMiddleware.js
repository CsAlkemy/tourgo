"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const common_1 = require("@tsed/common");
const core_1 = require("@tsed/core");
const ts_httpexceptions_1 = require("ts-httpexceptions");
/**
 * @middleware
 */
let ValidationErrorMiddleware = class ValidationErrorMiddleware {
    use(error) {
        if (error && core_1.nameOf(core_1.getClass(error)) === "MongooseError") {
            const err = new ts_httpexceptions_1.BadRequest(error.message);
            err.stack = error.stack;
            throw err;
        }
        throw error;
    }
};
tslib_1.__decorate([
    tslib_1.__param(0, common_1.Err()),
    tslib_1.__metadata("design:type", Function),
    tslib_1.__metadata("design:paramtypes", [Object]),
    tslib_1.__metadata("design:returntype", void 0)
], ValidationErrorMiddleware.prototype, "use", null);
ValidationErrorMiddleware = tslib_1.__decorate([
    common_1.Middleware()
], ValidationErrorMiddleware);
exports.ValidationErrorMiddleware = ValidationErrorMiddleware;

//# sourceMappingURL=ValidationErrorMiddleware.js.map
